{% extends "leaflet-base.html" %}
{% from "dl-macros/nav-macros.html" import sublevelNavItem %}

{% block topLevelNavItems %}
  {{ toplevelNavItem("Get started", "/") }}
  {{ toplevelNavItem("Components", "/components") }}
  {{ toplevelNavItem("Content", "/publishing") }}
  {{ toplevelNavItem("Jinja", "/jinja") }}
  {{ toplevelNavItem("Javascripts", "/javascripts", true) }}
{% endblock %}

{% block content %}

<div class="app-nav__body govuk-width-container">
  {%- include 'menu-partials/javascripts-menu.html' -%}

  <div class="app-nav__content">
    <main id="main-content" class="app-content" role="main">
      <div class="app-content__header">
        <span class="govuk-caption-xl">Javascripts</span>
        <h1 class="govuk-heading-xl">
          MHCLG Maps
        </h1>
      </div>

      <p class="govuk-body">A wrapper for leafletJS that makes it quicker to render a map.</p>

      <h2 class="govuk-heading-l">How to use</h2>

      <p class="govuk-body">You need to include the script before the closing body tag. E.g.</p>
      <p class="govuk-body">
        <p><code>{{ "<script src='/static/javascripts/mhclg-maps.js'></script>"|forceescape }}</code></p>
      </p>

      <p class="govuk-body">
        Initialise it with:
      </p>

      <p class="govuk-body">
        {% from 'js-docs/examples/mhclg-basic.html' import mhclgMapBasic %}
        <pre><code class="html">
        {%- filter forceescape -%}
          {{- mhclgMapBasic() -}}
        {%- endfilter -%}</code></pre>
      </p>

      <p class="govuk-body">Where <code>#map-container</code> is an element on the page that will contain the map.</p>

      {% from "govuk-jinja-components/warning-text/macro.jinja" import govukWarningText %}
      {{ govukWarningText({
        "text": "Remember to set up your pages to use Leaflet properly",
        "iconFallbackText": "Warning"
      }) }}

      <h2 class="govuk-heading-l">Example usage</h2>


      <div id="map-container" style="height: 400px;"></div>
      <div class="map__site-count map__site-count--warning govuk-!-margin-bottom-9">
          All 5 sites plotted.</div>
      <script src='/static/javascripts/mhclg/mhclg-maps.js'></script>
      {% set token = config.MAPBOX_TOKEN %}
      {{ mhclgMapBasic(token=token) }}

      <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">
      <h3 class="govuk-heading-m">Popup</h3>

      <div class="popup-container-tmp" style="position:relative;height:500px;">
        <div class="leaflet-popup bfs-popup  leaflet-zoom-animated" style="opacity: 1;">
          <div class="leaflet-popup-content-wrapper">
            <div class="leaflet-popup-content" style="width: 300px;">
              <div class="bfs">
                <span class="bfs__end-banner">This is from a function</span>
                <div class="bfs__header">
                  <span class="govuk-caption-s">BLR028 sites</span>
                  <h3 class="govuk-heading-s bfs__addr">Westbury Estate</h3>
                </div>
                <div class="govuk-grid-row bfs__key-data">
                  <dl class="govuk-grid-column-one-half">
                    <dt>Hectare</dt><dd>2.84</dd>
                  </dl>
                  <dl class="govuk-grid-column-one-half">
                    <dt>Dwellings</dt><dd>181</dd>
                  </dl>
                </div>
                <div class="bfs__meta">
                  <dl>
                    <dt>Latitude</dt><dd>51.46984</dd>
                  </dl>
                  <dl>
                    <dt>Longitude</dt><dd>-0.139441</dd>
                  </dl>
                  <dl>
                    <dt>Date added</dt><dd>2017-12-15</dd>
                  </dl>
                  <dl>
                    <dt>Last updated</dt><dd>2019-12-20</dd>
                  </dl>
                </div>
                <div class="bfs__footer">
                  <a href="#" class="govuk-link">See all site properties</a>
                </div>
              </div>
            </div>
          </div>
          <div class="leaflet-popup-tip-container">
            <div class="leaflet-popup-tip"></div>
          </div>
          <a class="leaflet-popup-close-button" href="#close">Ã—</a>
        </div>
      </div>

    </main>
  </div>
</div>

{% endblock %}