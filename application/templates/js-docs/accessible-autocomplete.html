{% extends "leaflet-base.html" %}
{% from "dl-macros/nav-macros.html" import sublevelNavItem %}

{% block headEnd %}
  {{ super() }}
  <link rel="stylesheet" href="/static/stylesheets/vendor/govuk-accessible-autocomplete.min.css" />
{% endblock %}



{% block topLevelNavItems %}
  {{ toplevelNavItem("Get started", "/") }}
  {{ toplevelNavItem("Components", "/components") }}
  {{ toplevelNavItem("Content", "/publishing") }}
  {{ toplevelNavItem("Jinja", "/jinja") }}
  {{ toplevelNavItem("Javascripts", "/javascripts", true) }}
{% endblock %}

{% block content %}

<div class="app-nav__body govuk-width-container">
  <div class="app-nav__subnav app-hide-mobile">
    <nav class="app-subnav">

      <h4 class="app-subnav__heading">Available scripts</h4>

      <ul class="app-subnav__section">
        {{ sublevelNavItem("MHCLG Maps", url_for('frontend.mhclg_maps')) }}
        {{ sublevelNavItem("Accessible Autocomplete", url_for('frontend.accessible_autocomplete')) }}
      </ul> 

    </nav>
  </div>

  <div class="app-nav__content">
    <main id="main-content" class="app-content" role="main">
      <div class="app-content__header">
        <span class="govuk-caption-xl">Javascripts</span>
        <h1 class="govuk-heading-xl">
          Accessible Autocomplete
        </h1>
      </div>

      <p class="govuk-body">
        This is the <a href="https://github.com/alphagov/accessible-autocomplete">accessible autocomplete</a> module created by GDS.
      </p>

      <p class="govuk-body">
        GDS have written about their <a href="https://designnotes.blog.gov.uk/2017/04/20/were-building-an-autocomplete/">motivations for creating the module</a>.
      </p>

      <h2 class="govuk-heading-l">Example usage</h2>

      <div class="govuk-grid-row">
        <form class="form pub-search-form govuk-grid-column-one-half">
          <div class="govuk-form-group">
            <label class="govuk-label" for="pub-picker">Find a Local Authority</label>
            <select class="govuk-select" name="pub-picker" id="pub-picker">
              <option value="">Select Locl Authority</option>
              <option value="Adur District Council">Adur District Council</option>
              <option value="Adur District Council">Dacorum Borough Council</option>
              <option value="Adur District Council">Harrogate Borough Council</option>
              <option value="Adur District Council">London Borough of Lambeth</option>
              <option value="Adur District Council">Winchester City Council</option>
            </select>
            
          </div>
          <div class="govuk-form-group">
            <a href="#" class="govuk-button">Save and continue</a>
          </div>
        </form>
      </div>

      <h2 class="govuk-heading-l">How to use</h2>
      <pre><code class="js">
        {%- filter forceescape -%}
<script>
  accessibleAutocomplete.enhanceSelectElement({
    defaultValue: '',
    confirmOnBlur: false,
    selectElement: document.querySelector('#pub-picker')
  });
</script>
        {%- endfilter -%}</code></pre>
    </main>
  </div>
</div>

{% endblock %}

{% block bodyEnd %}
{{ super() }}
<script src="/static/javascripts/vendor/govuk-accessible-autocomplete.min.js"></script>
<script>
  accessibleAutocomplete.enhanceSelectElement({
    defaultValue: '',
    confirmOnBlur: false,
    selectElement: document.querySelector('#pub-picker')
  });
</script>
{% endblock %}